{% extends "skeleton.html" %}
{% block title %} | My Goals{% endblock %}



{% block content %}
<script type="text/javascript">

function checkform(form)
{
  if(!(form.age.value>0 && form.age.value<=130))
  {
    alert("We need to know your age!  We can't just assume you're a strapping 23 year old in your prime like the designers of this website are!");
    return false;
  }
  if (!(form.minutesPerDay.value>=20 && form.minutesPerDay.value<=10000))
  {
    alert("Tell us how many minutes per day you have available for exercise (at least 20 minutes).  That way, we can have fun packing your schedule with exercises much like a game of tetris.");
    return false;
  }
  if (!(form.daysPerWeek.value>0 && form.daysPerWeek.value<=7))
  {
    alert("We need to know how many days a week you can commit to exercising.  We create your schedule around you, so the least you can do is input a valid range.");
    return false;
  }
  var choice=false;
  for(j=0;j<form.goal.length;j++)
  {
    if(form.goal[j].checked)choice=true;
  }
  if(!choice)
  {
    alert("You need to pick a goal you big goof!");
    return false;
  }


  return true;
}



function updateChecks(checkBox)
{
  {% for outer in allEquipment %}
    {% for iterator in outer %}
      document.getElementById({{iterator.id}}).checked=checkBox.checked;
    {% endfor %}
  {% endfor %}

}
function commonEquipment(checkBox)
{
  document.getElementById('1').checked=checkBox.checked;
  document.getElementById('2').checked=checkBox.checked;
  document.getElementById('5').checked=checkBox.checked;
  document.getElementById('9').checked=checkBox.checked;
  document.getElementById('10').checked=checkBox.checked;
  document.getElementById('15').checked=checkBox.checked;
  document.getElementById('16').checked=checkBox.checked;
  document.getElementById('18').checked=checkBox.checked;
  document.getElementById('21').checked=checkBox.checked;
}

var totalChecks=0

function updateTotal(checkBox)
{
  if(checkBox.checked)
  {
    totalChecks++;
    if(totalChecks>7-document.getElementById("daysPerWeek").value)
    {
      totalChecks--;
      checkBox.checked=false;
    }
  }
  else totalChecks --;
}

function makeVisible(textInput)
{
  totalChecks=0;
  if(!(document.getElementById("daysPerWeek").value>0 && document.getElementById("daysPerWeek").value<=7))
  {
    alert('Input a value between 1 and 7 please');
    document.getElementById("daysPerWeek").value=5;
  }
  innerHTML='Which days of the<br>week are your normal<br>off days?'
  document.getElementById('toFill1').innerHTML = innerHTML;
  innerHTML="<input type='checkbox' name='mon'  value='1' onClick='updateTotal(this)'>Monday<br><input name='tues' type='checkbox'   value='1' onClick='updateTotal(this)'>Tuesday<br><input type='checkbox'   name='wed' value='1' onClick='updateTotal(this)'>Wednesday<br><input type='checkbox'  name='thurs' value='1' onClick='updateTotal(this)'>Thursday<br><input type='checkbox' name='fri'  value='1' onClick='updateTotal(this)'>Friday<br><input type='checkbox' name='sat'  value='1' onClick='updateTotal(this)'>Saturday<br><input type='checkbox' name='sun'  value='1' onClick='updateTotal(this)'>Sunday<br>"
  document.getElementById('toFill2').innerHTML = innerHTML;
}



</script>

<form action="." method="POST" onsubmit="return checkform(this)">

<input type='hidden' name='day' id='day' value='0'>
<input type='hidden' name='year' id='year' value='0'>
<input type='hidden' name='month' id='month' value='0'>


<table style="width: 70%">
<tr><td style="text-align: right;">Age:</td><td><input type="text" class="text" name="age" size="3" value={{userInfo.age}} onFocus='makeBlank(this);' onBlur='updateValue(this);'></td></tr>
<tr><td style="text-align: right;">Gender:</td><td>
<select name="gender">
{% if isMale %}
<option value="Male">Male</option>
{% else %}
<option value="Female">Female</option>
{% endif %}
<option value="Male">Male</option>
<option value="Female">Female</option>
</select></td></tr>
<tr><td style="text-align: right;">Experience</td><td>
<select name="experience">
{% if currentExperience %}
<option value="{{currentExperience.id}}" >{{currentExperience.name}}</option>
{% endif %}
{% for iterator in experience %}
<option value="{{iterator.id}}" >{{iterator.name}}</option>
{% endfor %}
</select>




</td></tr>
<tr><td style="text-align: right;">Minutes per day <br>available for exercise</td><td><input type="text"  class="text" name="minutesPerDay" size="3" value={{userInfo.minutesPerDay}} onFocus='makeBlank(this);' onBlur='updateValue(this);'><h6>We recommend at least 75 minutes per<br>day to allow time for both lifting and cardio</h6></td></tr>
<tr><td style="text-align: right;">Days per week<br>available for exercise</td><td><input type="text" class="text" id="daysPerWeek" name="daysPerWeek" size="3" value={{userInfo.daysPerWeek}} onKeyUp='makeVisible(this)' onFocus='makeBlank(this);' onBlur='updateValue(this);'><h6>We recommend 3-5 days per week to allow <br>for consistency, effectiveness, and recuperation</h6></td></tr>
<tr><td id='toFill1' style="text-align: right;"></td><td id='toFill2'></td></tr>
<tr><td style="text-align: right;">Current fitness Level</td><td>
<select name="fitnessLevel">
{% if currentExperience %}
<option value="{{currentFitness.id}}" >{{currentFitness.name}}</option>
{% endif %}


{% for iterator in allFitnessLevel %}
<option value="{{iterator.id}}">{{iterator.name}}</option>
{% endfor %}
</selectl>
</td></tr>
<!--<tr><td>Current injuries</td><td>xxxxx</td></tr>-->
</table>

<table style="width: 70%; font-size: .85em;">
<tr><td><h3>Resources Available</h3></td><td></td></tr>
<tr><td><b><input type="checkbox" class="checkbox"  id="selectAll" value="1" onClick='updateChecks(this)'>Select All</b></td><td></td><td><b><input type="checkbox" class="checkbox"  id="selectAll" value="1" onClick='commonEquipment(this)'>Select Common Gym Equipment</b></td></tr>
{% for outer in allEquipment %}
<tr class="{% cycle 'row1' 'row2' %}">
  {% for iterator in outer %}
<td><input type="checkbox" class="checkbox" name="{{iterator.id}}" id="{{iterator.id}}" value="1">{{iterator.name}}</td><td></td>
  {% endfor %}
</tr>
{% endfor %}
</table>


<table style="width: 70%; font-size: 1em;">
<tr><td><b>My Goal</b></td></tr>
{% for outer in allGoals %}
<tr class="{% cycle 'row1' 'row2' %}" style='font-size:1.0em;'>

<td><input type="radio" name="goal" value="{{outer.id}}" {% ifequal outer.id userInfo.goal.id%}CHECKED {% endifequal %}><b>{{outer.name}}</b></td><td></td>

</tr>

<tr class="{% cycle 'row1' 'row2' %}" style='font-size:.9em;'><td style='padding-left: 4em;'><br>{{outer.description.text}}<br><br></td></tr>
{% endfor %}
</table>

<div style="padding: 1em;">
<input type="Submit" value="Save">

</form>
</div>
{% for iterator in allGoals %}<br><br>{% endfor %}
<script type="text/javascript">
{% for iterator in checkedEquipment %}
document.getElementById({{iterator.id}}).checked=true;
{% endfor %}




function fillDate()
{
try
{
var now = new Date();

var day = now.getDate();
var month = now.getMonth()+1;
var year = now.getFullYear();

document.getElementById('day').value=day;
document.getElementById('month').value=month;
document.getElementById('year').value=year;

}
catch(err)
{
alert(err);
}

}
</script>

<script type="text/javascript">
try
{
fillDate();
}
catch(err)
{
alert(err);
}






</script>

{% endblock %}
